<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anubhav Soam | Finance & Analytics</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=DM+Mono:wght@300;400;500&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">

</head>
<body>

<nav>
  <div class="nav-logo">AS</div>
  <ul class="nav-links">
    <li><a onclick="showTab('portfolio')" class="active" id="nav-portfolio">Portfolio</a></li>
    <li><a onclick="showTab('dcf-tab')" id="nav-dcf-tab">DCF Model</a></li>
  </ul>
  <button id="theme-toggle" class="theme-toggle" type="button" aria-label="Toggle color theme">Light Mode</button>
</nav>

<!-- =============== PORTFOLIO TAB =============== -->
<div id="portfolio" class="tab-content active">

  <!-- HERO -->
  <div id="home" style="min-height:100vh;display:flex;align-items:center;padding:8rem 3rem 4rem;position:relative;overflow:hidden;">
    <div class="hero-bg"></div>
    <div class="hero-grid-lines"></div>
    <div class="hero-content">
      <div class="hero-tag fade-in delay-1">Finance & Analytics Professional</div>
      <h1 class="fade-in delay-2">Anubhav<br><span class="hero-name-italic">Soam</span></h1>
      <p class="hero-subtitle fade-in delay-3">Deputy Manager ‚Äì Innovation | MBA Finance & Analytics | CFA Level 1 Candidate. Bridging data intelligence and financial strategy to drive measurable outcomes.</p>

      <div class="hero-stats fade-in delay-3">
        <div class="stat-item">
          <div class="stat-value">1.7+</div>
          <div class="stat-label">Years Experience</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">25+</div>
          <div class="stat-label">Workflows Automated</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">655+</div>
          <div class="stat-label">Districts Analyzed</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">78%</div>
          <div class="stat-label">Model Accuracy</div>
        </div>
      </div>

      <div class="hero-cta fade-in delay-4">
        <a href="mailto:soamanubhav@gmail.com" class="btn btn-primary">Get In Touch</a>
        <a href="https://www.linkedin.com/in/anubhav-soam/" target="_blank" rel="noreferrer noopener" class="btn btn-outline">LinkedIn ‚Üó</a>
        <button onclick="showTab('dcf-tab')" class="btn btn-outline" style="border-color:var(--accent2);color:var(--accent2);">Try DCF Model ‚Üó</button>
      </div>
    </div>

  </div>

  <!-- EXPERIENCE -->
  <section id="experience">
    <div class="section-header">
      <span class="section-num">01</span>
      <h2 class="section-title">Experience</h2>
      <div class="section-line"></div>
    </div>

    <div class="experience-item">
      <div class="exp-left">
        <div class="exp-date">04/2024 ‚Äì 10/2025</div>
        <div class="exp-company">Shriram Life Insurance</div>
        <div class="exp-location">üìç Hyderabad</div>
      </div>
      <div class="exp-right">
        <h3>Deputy Manager ‚Äì Innovation</h3>
        <ul class="exp-list">
          <li>Automated 25+ resource planning workflows using Alteryx, streamlining internal operations and cutting manual effort significantly.</li>
          <li>Prepared and presented financial reports to facilitate strategic collaboration with partner banks.</li>
          <li>Spearheaded development of innovative insurance products using Empathy Maps, Market Research, and user CODEX, expanding market reach.</li>
          <li>Conducted mortality analysis across 655+ districts with actuarial teams to identify high-growth geographies.</li>
          <li>Led strategic blockchain integration project to automate claims settlement, boosting operational efficiency.</li>
          <li>Created 8+ targeted value propositions aligned with diverse customer segments, strengthening product-market fit.</li>
          <li>Designed population heatmaps leveraging district-level demographic data ‚Äî enabling launch of 40+ new sales venues.</li>
        </ul>
      </div>
    </div>

    <div class="experience-item">
      <div class="exp-left">
        <div class="exp-date">12/2024 ‚Äì 02/2025</div>
        <div class="exp-company">Finlatics</div>
        <div class="exp-location">üìç Remote</div>
      </div>
      <div class="exp-right">
        <h3>Investment Banking ‚Äì Live Project</h3>
        <ul class="exp-list">
          <li>Gained hands-on experience in equity research and investment banking, analyzing 20+ stocks across sectors.</li>
          <li>Conducted risk assessment and portfolio management for a simulated portfolio worth ‚Çπ2L+, optimizing asset allocation.</li>
          <li>Developed skills in fundamental & technical analysis, valuation techniques, and financial reporting.</li>
        </ul>
      </div>
    </div>

    <div class="experience-item">
      <div class="exp-left">
        <div class="exp-date">04/2023 ‚Äì 05/2023</div>
        <div class="exp-company">K-12 Techno Service</div>
        <div class="exp-location">üìç Pune</div>
      </div>
      <div class="exp-right">
        <h3>Operations Intern</h3>
        <ul class="exp-list">
          <li>Ensured high accuracy in financial data validation and streamlined data management.</li>
          <li>Applied advanced Excel functions to streamline financial reconciliation and reporting.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- SKILLS -->
  <section id="skills" style="background:var(--surface);max-width:100%;padding:5rem 0;">
    <div style="max-width:1200px;margin:0 auto;padding:0 3rem;">
      <div class="section-header">
        <span class="section-num">02</span>
        <h2 class="section-title">Skills</h2>
        <div class="section-line"></div>
      </div>
      <div class="skills-grid">
        <div class="skill-card">
          <div class="skill-card-title">Technical Tools</div>
          <div class="skill-tags">
            <span class="skill-tag">Alteryx</span>
            <span class="skill-tag">Python</span>
            <span class="skill-tag">SQL</span>
            <span class="skill-tag">R Programming</span>
            <span class="skill-tag">Power BI</span>
            <span class="skill-tag">MS Excel</span>
            <span class="skill-tag">Streamlit</span>
          </div>
        </div>
        <div class="skill-card">
          <div class="skill-card-title">Finance Skills</div>
          <div class="skill-tags">
            <span class="skill-tag">Financial Modelling</span>
            <span class="skill-tag">DCF Valuation</span>
            <span class="skill-tag">Equity Research</span>
            <span class="skill-tag">Fixed Income</span>
            <span class="skill-tag">Derivatives</span>
            <span class="skill-tag">Ratio Analysis</span>
          </div>
        </div>
        <div class="skill-card">
          <div class="skill-card-title">Python Libraries</div>
          <div class="skill-tags">
            <span class="skill-tag">pandas</span>
            <span class="skill-tag">NumPy</span>
            <span class="skill-tag">Caret</span>
            <span class="skill-tag">Forecast</span>
            <span class="skill-tag">Yahoo Finance API</span>
          </div>
        </div>
        <div class="skill-card">
          <div class="skill-card-title">Soft Skills</div>
          <div class="skill-tags">
            <span class="skill-tag">Analytical Problem-Solving</span>
            <span class="skill-tag">Cross-functional Collaboration</span>
            <span class="skill-tag">Presentation</span>
            <span class="skill-tag">Market Research</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects">
    <div class="section-header">
      <span class="section-num">03</span>
      <h2 class="section-title">Projects</h2>
      <div class="section-line"></div>
    </div>
    <div class="projects-grid">
      <div class="project-card">
        <div class="project-icon">üìä</div>
        <h3>Financial Modeling & Valuation Tool</h3>
        <p>Interactive Streamlit dashboard integrating Yahoo Finance APIs, automating DCF valuation and 5‚Äì10 year revenue forecasting. Cut manual Excel modeling effort by 70%+.</p>
        <div>
          <span class="project-tag">Python</span>
          <span class="project-tag">Streamlit</span>
          <span class="project-tag">DCF</span>
          <span class="project-tag">Yahoo Finance</span>
        </div>
        <div style="margin-top:1rem;">
          <span style="font-size:0.75rem;color:var(--accent);">Advanced sensitivity analysis ¬∑ Football field charts ¬∑ EV/EBITDA multiples</span>
        </div>
      </div>

      <div class="project-card">
        <div class="project-icon">üìà</div>
        <h3>Ratio Analysis Application</h3>
        <p>Financial ratio dashboard automating extraction of income statements, balance sheets, and cash flows from public filings. Supports investment evaluation and peer comparison.</p>
        <div>
          <span class="project-tag">Python</span>
          <span class="project-tag">SQL</span>
          <span class="project-tag">Data Viz</span>
          <span class="project-tag">Equity Research</span>
        </div>
        <div style="margin-top:1rem;">
          <span style="font-size:0.75rem;color:var(--accent);">Profitability ¬∑ Liquidity ¬∑ Leverage ¬∑ Efficiency ¬∑ Market ratios</span>
        </div>
      </div>

      <div class="project-card">
        <div class="project-icon">ü¶†</div>
        <h3>COVID-19 Trend Forecasting</h3>
        <p>Published in Springer ‚Äî developed a statistical model with 78% prediction accuracy for infection spread using time-series data analysis.</p>
        <div>
          <span class="project-tag">R</span>
          <span class="project-tag">Time-Series</span>
          <span class="project-tag">Springer</span>
        </div>
        <a href="https://link.springer.com/chapter/10.1007/978-981-16-5685-9_34" target="_blank" rel="noreferrer noopener" style="display:inline-block;margin-top:1rem;font-size:0.75rem;color:var(--accent2);text-decoration:none;">View Publication ‚Üó</a>
      </div>

      <div class="project-card" style="cursor:pointer;" onclick="showTab('dcf-tab')">
        <div class="project-icon">üèóÔ∏è</div>
        <h3>Live DCF Model</h3>
        <p>Try the interactive Discounted Cash Flow model embedded in this portfolio ‚Äî featuring sensitivity heatmaps, football field analysis, and multi-method valuation.</p>
        <div>
          <span class="project-tag">DCF</span>
          <span class="project-tag">Sensitivity</span>
          <span class="project-tag">Football Field</span>
        </div>
        <div style="margin-top:1rem;color:var(--accent);font-size:0.8rem;">Click to launch ‚Üí </div>
      </div>
    </div>
  </section>

  <!-- EDUCATION -->
  <section id="education" style="background:var(--surface);max-width:100%;padding:5rem 0;">
    <div style="max-width:1200px;margin:0 auto;padding:0 3rem;">
      <div class="section-header">
        <span class="section-num">04</span>
        <h2 class="section-title">Education</h2>
        <div class="section-line"></div>
      </div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:4rem;">
        <div class="education-timeline">
          <div class="edu-item">
            <div class="edu-year">2025 ‚Äì 2026</div>
            <div class="edu-degree">Chartered Financial Analyst (CFA)</div>
            <div class="edu-institution">Level 1 Candidate</div>
            <span class="tag-cfa">In Progress</span>
          </div>
          <div class="edu-item">
            <div class="edu-year">2022 ‚Äì 2024</div>
            <div class="edu-degree">MBA ‚Äì Finance & Analytics</div>
            <div class="edu-institution">NMIMS, Hyderabad</div>
            <span class="edu-score">Score: 75.00%</span>
          </div>
          <div class="edu-item">
            <div class="edu-year">2017 ‚Äì 2021</div>
            <div class="edu-degree">B.Tech ‚Äì Computer Science Engineering</div>
            <div class="edu-institution">SRM Institute, Chennai</div>
            <span class="edu-score">Score: 81.94%</span>
          </div>
          <div class="edu-item">
            <div class="edu-year">2016 ‚Äì 2017</div>
            <div class="edu-degree">XII ‚Äì CBSE (PCM)</div>
            <div class="edu-institution">The Shishukunj International School, Indore</div>
            <span class="edu-score">Score: 82.20%</span>
          </div>
        </div>

        <div>
          <h3 style="font-family:'Playfair Display',serif;font-size:1.2rem;margin-bottom:1.5rem;color:var(--muted);">Certifications</h3>
          <div class="cert-grid">
            <div class="cert-item">Alteryx Designer Core</div>
            <div class="cert-item">Derivatives ‚Äì Options & Futures</div>
            <div class="cert-item">NPTEL ‚Äì DBMS</div>
            <div class="cert-item">NPTEL ‚Äì DSA using Python</div>
            <div class="cert-item">Financial Modelling</div>
            <div class="cert-item">Investment Banking Analysis</div>
            <div class="cert-item">Power BI</div>
            <div class="cert-item">NISM ‚Äì SEBI Investors Module</div>
          </div>

          <div class="achievement-card" style="margin-top:2rem;">
            <h3>üèÜ Research Paper Publication</h3>
            <p style="font-size:0.85rem;color:#b0b0c8;line-height:1.6;">Published research on COVID-19 trend forecasting in Springer. Developed a statistical model with <strong style="color:var(--accent);">78% prediction accuracy</strong> for infection spread using time-series data analysis.</p>
            <a href="https://link.springer.com/chapter/10.1007/978-981-16-5685-9_34" target="_blank" rel="noreferrer noopener" style="display:inline-block;margin-top:1rem;font-size:0.78rem;color:var(--accent2);text-decoration:none;">springer.com ‚Üó</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <div class="section-header">
      <span class="section-num">05</span>
      <h2 class="section-title">Contact</h2>
      <div class="section-line"></div>
    </div>
    <div class="contact-grid">
      <div>
        <p style="color:var(--muted);font-size:0.95rem;line-height:1.8;margin-bottom:2rem;">Open to opportunities in financial analysis, investment banking, data analytics, and product innovation. Let's connect and explore what's possible.</p>
        <div class="contact-info">
          <a href="mailto:soamanubhav@gmail.com" class="contact-item">
            <div class="contact-icon">‚úâÔ∏è</div>
            <div>
              <div class="contact-label">Email</div>
              <div class="contact-value">soamanubhav@gmail.com</div>
            </div>
          </a>
          <a href="tel:+919755433510" class="contact-item">
            <div class="contact-icon">üì±</div>
            <div>
              <div class="contact-label">Phone</div>
              <div class="contact-value">+91 97554 33510</div>
            </div>
          </a>
          <a href="https://www.linkedin.com/in/anubhav-soam/" target="_blank" rel="noreferrer noopener" class="contact-item">
            <div class="contact-icon">üíº</div>
            <div>
              <div class="contact-label">LinkedIn</div>
              <div class="contact-value">linkedin.com/in/anubhav-soam</div>
            </div>
          </a>
        </div>
      </div>
      <div style="background:var(--card);border:1px solid var(--border);border-radius:8px;padding:2rem;">
        <div style="font-family:'DM Mono',monospace;font-size:0.7rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--accent);margin-bottom:1.5rem;">Interests & Beyond</div>
        <div style="display:flex;flex-direction:column;gap:1rem;">
          <div style="display:flex;align-items:center;gap:1rem;">
            <span style="font-size:1.5rem;">üèä</span>
            <div>
              <div style="font-size:0.9rem;">Swimming</div>
              <div style="font-size:0.75rem;color:var(--muted);">Discipline & endurance</div>
            </div>
          </div>
          <div style="display:flex;align-items:center;gap:1rem;">
            <span style="font-size:1.5rem;">üéÆ</span>
            <div>
              <div style="font-size:0.9rem;">E-Sports</div>
              <div style="font-size:0.75rem;color:var(--muted);">Strategic thinking & quick decisions</div>
            </div>
          </div>
          <div style="display:flex;align-items:center;gap:1rem;">
            <span style="font-size:1.5rem;">üì∞</span>
            <div>
              <div style="font-size:0.9rem;">Current Affairs</div>
              <div style="font-size:0.75rem;color:var(--muted);">Staying informed on markets & global events</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <p>¬© 2025 Anubhav Soam &nbsp;¬∑&nbsp; Built with precision &nbsp;¬∑&nbsp; Finance meets Technology</p>
  </footer>

</div><!-- end portfolio tab -->

<!-- =============== DCF TAB =============== -->
import { useState, useMemo, useCallback } from "react";

const CSS = `
  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600&family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap');
  :root {
    --bg:#0a0e17; --surface:#111827; --surface2:#1a2235; --border:#1e2d45;
    --border2:#243452; --amber:#f59e0b; --amber2:#fbbf24; --green:#10b981;
    --red:#ef4444; --blue:#3b82f6; --text:#e2e8f0; --muted:#64748b; --muted2:#94a3b8;
    --mono:'IBM Plex Mono',monospace; --sans:'IBM Plex Sans',sans-serif;
  }
  *{box-sizing:border-box;margin:0;padding:0;}
  .root{font-family:var(--sans);background:var(--bg);min-height:100vh;color:var(--text);padding:20px;}
  .ticker-bar{display:flex;gap:10px;align-items:center;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:12px 16px;margin-bottom:16px;flex-wrap:wrap;}
  .ticker-label{font-family:var(--mono);font-size:11px;color:var(--amber);letter-spacing:2px;text-transform:uppercase;white-space:nowrap;}
  .ticker-input{flex:1;min-width:160px;background:var(--bg);border:1px solid var(--border2);border-radius:5px;padding:8px 12px;color:var(--text);font-family:var(--mono);font-size:14px;outline:none;transition:border-color .2s;}
  .ticker-input:focus{border-color:var(--amber);}
  .ticker-input::placeholder{color:var(--muted);}
  .fetch-btn{padding:8px 20px;border-radius:5px;border:1px solid var(--amber);background:transparent;color:var(--amber);font-family:var(--mono);font-size:12px;font-weight:600;cursor:pointer;letter-spacing:1px;text-transform:uppercase;transition:all .2s;white-space:nowrap;}
  .fetch-btn:hover{background:var(--amber);color:var(--bg);}
  .fetch-btn:disabled{opacity:.4;cursor:not-allowed;}
  .status-ok{font-family:var(--mono);font-size:11px;color:var(--green);}
  .status-err{font-family:var(--mono);font-size:11px;color:var(--red);}
  .header-card{background:linear-gradient(135deg,var(--surface),var(--surface2));border:1px solid var(--border);border-top:2px solid var(--amber);border-radius:8px;padding:20px 24px;margin-bottom:16px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;}
  .co-name{font-family:var(--mono);font-size:22px;font-weight:600;}
  .co-sub{font-family:var(--mono);font-size:11px;color:var(--muted);margin-top:4px;letter-spacing:1px;}
  .kpi-grid{display:flex;gap:24px;flex-wrap:wrap;}
  .kpi-item{text-align:right;}
  .kpi-label{font-family:var(--mono);font-size:9px;color:var(--muted);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:3px;}
  .kpi-value{font-family:var(--mono);font-size:18px;font-weight:600;color:var(--amber);}
  .kpi-value.green{color:var(--green);} .kpi-value.red{color:var(--red);} .kpi-value.white{color:var(--text);}
  .tabs{display:flex;gap:2px;margin-bottom:14px;border-bottom:1px solid var(--border);padding-bottom:0;}
  .tab{padding:8px 18px;border:none;background:transparent;color:var(--muted);font-family:var(--mono);font-size:11px;font-weight:500;cursor:pointer;letter-spacing:1px;text-transform:uppercase;border-bottom:2px solid transparent;margin-bottom:-1px;transition:all .15s;}
  .tab:hover{color:var(--text);} .tab.active{color:var(--amber);border-bottom-color:var(--amber);}
  .card{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:18px 20px;}
  .card-title{font-family:var(--mono);font-size:10px;color:var(--amber);letter-spacing:2px;text-transform:uppercase;margin-bottom:14px;padding-bottom:10px;border-bottom:1px solid var(--border);}
  .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
  .inp-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;gap:8px;}
  .inp-label{font-size:12px;color:var(--muted2);white-space:nowrap;min-width:165px;}
  .inp-field{background:var(--bg);border:1px solid var(--border2);border-radius:4px;padding:5px 9px;color:var(--amber);font-family:var(--mono);font-size:12px;text-align:right;outline:none;width:100%;transition:border-color .2s;}
  .inp-field:focus{border-color:var(--amber);} .inp-field.tl{text-align:left;color:var(--text);}
  .data-table{width:100%;border-collapse:collapse;font-family:var(--mono);font-size:12px;}
  .data-table th{background:var(--surface2);color:var(--muted);font-size:10px;letter-spacing:1px;text-transform:uppercase;padding:9px 14px;text-align:right;border-bottom:1px solid var(--border2);font-weight:500;}
  .data-table th:first-child{text-align:left;}
  .data-table td{padding:7px 14px;text-align:right;border-bottom:1px solid var(--border);color:var(--muted2);}
  .data-table td:first-child{text-align:left;color:var(--text);}
  .data-table tr:hover td{background:var(--surface2);}
  .row-bold td{color:var(--text)!important;font-weight:600;}
  .row-hi td{color:var(--amber)!important;font-weight:600;background:rgba(245,158,11,.05)!important;}
  .val-row{display:flex;justify-content:space-between;align-items:center;padding:9px 0;border-bottom:1px solid var(--border);font-family:var(--mono);font-size:13px;}
  .val-row .vl{color:var(--muted2);font-size:12px;}
  .val-total .vl{color:var(--text);font-weight:600;}
  .val-total .vn{font-size:18px;color:var(--amber);font-weight:600;}
  .val-implied .vn{font-size:22px;color:var(--green);font-weight:700;}
  .metric-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
  .metric-card{background:var(--bg);border:1px solid var(--border2);border-radius:6px;padding:12px 14px;}
  .metric-card .ml{font-family:var(--mono);font-size:9px;color:var(--muted);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:5px;}
  .metric-card .mv{font-family:var(--mono);font-size:17px;font-weight:600;color:var(--amber2);}
  .sens-table{border-collapse:collapse;font-family:var(--mono);font-size:12px;}
  .sens-table th,.sens-table td{padding:8px 16px;text-align:center;border:1px solid var(--border);}
  .sens-table th{background:var(--surface2);color:var(--muted);font-size:10px;letter-spacing:1px;text-transform:uppercase;font-weight:500;}
  .sens-base{background:var(--amber)!important;color:var(--bg)!important;font-weight:700;}
  @keyframes spin{to{transform:rotate(360deg);}}
  .spinner{width:14px;height:14px;border:2px solid var(--border2);border-top-color:var(--amber);border-radius:50%;animation:spin .7s linear infinite;display:inline-block;}
  .note{font-family:var(--mono);font-size:10px;color:var(--muted);margin-top:12px;text-align:center;}
  .loading-overlay{display:flex;flex-direction:column;align-items:center;gap:12px;padding:40px;color:var(--muted);font-family:var(--mono);font-size:12px;}
  .big-spinner{width:32px;height:32px;border:3px solid var(--border2);border-top-color:var(--amber);border-radius:50%;animation:spin .8s linear infinite;}
`;

const fmt  = (n,d=1) => (isNaN(n)||n==null)?"‚Äî":n.toLocaleString("en-US",{minimumFractionDigits:d,maximumFractionDigits:d});
const fmtB = (n,sym="$") => { const a=Math.abs(n),s=n<0?"-":""; return a>=1e12?`${s}${sym}${fmt(a/1e12,2)}T`:a>=1e9?`${s}${sym}${fmt(a/1e9,1)}B`:a>=1e6?`${s}${sym}${fmt(a/1e6,0)}M`:`${s}${sym}${fmt(a,0)}`; };
const fmtP = n => `${fmt(n,1)}%`;

const DEFAULTS = {
  companyName:"",ticker:"",currency:"USD",sym:"$",
  revenue:0,ebitdaMargin:25,daPercent:4,taxRate:21,capexPercent:5,nwcPercent:2,
  revenueGrowth:[10,9,8,7,6],
  wacc:10,terminalGrowth:3,evEbitdaMultiple:15,terminalMethod:"gordon",
  netDebt:0,sharesOut:1000,currentPrice:0,
};

function calcDCF(inp) {
  let rev = inp.revenue;
  const proj = [1,2,3,4,5].map((y,i)=>{
    rev=rev*(1+inp.revenueGrowth[i]/100);
    const ebitda=rev*(inp.ebitdaMargin/100), da=rev*(inp.daPercent/100);
    const ebit=ebitda-da, nopat=ebit*(1-inp.taxRate/100);
    const capex=rev*(inp.capexPercent/100), nwc=rev*(inp.nwcPercent/100);
    const fcf=nopat+da-capex-nwc, df=1/Math.pow(1+inp.wacc/100,y);
    return {year:2024+y,rev,ebitda,da,ebit,nopat,capex,nwc,fcf,df,pvFCF:fcf*df};
  });
  const pvFCFSum=proj.reduce((s,p)=>s+p.pvFCF,0);
  const lastFCF=proj[4].fcf, lastEBITDA=proj[4].ebitda;
  const tv=inp.terminalMethod==="gordon"
    ?(lastFCF*(1+inp.terminalGrowth/100))/((inp.wacc-inp.terminalGrowth)/100)
    :lastEBITDA*inp.evEbitdaMultiple;
  const pvTV=tv/Math.pow(1+inp.wacc/100,5);
  const ev=pvFCFSum+pvTV, eqV=ev-inp.netDebt;
  const impliedPrice=eqV/inp.sharesOut, tvPct=(pvTV/ev)*100;
  const upside=inp.currentPrice>0?((impliedPrice/inp.currentPrice)-1)*100:null;
  const sensRows=[-2,-1,0,1,2].map(d=>inp.wacc+d);
  const sensCols=[-1,-.5,0,.5,1].map(d=>inp.terminalGrowth+d);
  const sensitivity=sensRows.map(w=>sensCols.map(tg=>{
    const tvS=inp.terminalMethod==="gordon"?(lastFCF*(1+tg/100))/((w-tg)/100):lastEBITDA*inp.evEbitdaMultiple;
    return (pvFCFSum+tvS/Math.pow(1+w/100,5)-inp.netDebt)/inp.sharesOut;
  }));
  return {proj,pvFCFSum,pvTV,tv,ev,eqV,impliedPrice,tvPct,upside,sensitivity,sensRows,sensCols};
}

export default function App() {
  const [inp,setInp]=useState(DEFAULTS);
  const [ticker,setTicker]=useState("RELIANCE.NS");
  const [loading,setLoading]=useState(false);
  const [status,setStatus]=useState(null);
  const [tab,setTab]=useState("inputs");

  const set=(k,v)=>setInp(p=>({...p,[k]:v}));
  const setG=(i,v)=>{const g=[...inp.revenueGrowth];g[i]=parseFloat(v)||0;setInp(p=>({...p,revenueGrowth:g}));};

  const fetchData = useCallback(async()=>{
    if(!ticker.trim()){setStatus({ok:false,msg:"Enter a ticker symbol."});return;}
    setLoading(true);setStatus(null);
    try {
      const prompt = `You are a financial data assistant. Return ONLY a valid JSON object (no markdown, no explanation) with real financial data for the publicly traded company with ticker: ${ticker.trim().toUpperCase()}

Use the most recent fiscal year available. Return this exact structure:
{
  "companyName": "Full company name",
  "ticker": "TICKER",
  "currency": "USD or INR or GBP etc",
  "currencySymbol": "$ or ‚Çπ or ¬£ etc",
  "currentPrice": <latest stock price as number>,
  "revenue": <total revenue in millions as number>,
  "ebitda": <EBITDA in millions as number>,
  "ebitdaMargin": <EBITDA margin as percent number e.g. 25.3>,
  "netDebt": <net debt in millions = total debt minus cash, as number>,
  "sharesOutstanding": <shares outstanding in millions as number>,
  "capexPercent": <capex as % of revenue as number>,
  "daPercent": <D&A as % of revenue as number>,
  "taxRate": <effective tax rate as percent number>,
  "revenueGrowthLast": <last year revenue growth % as number>,
  "exchange": "NSE/BSE/NYSE/NASDAQ etc"
}

If you don't have data for a field, use a reasonable industry estimate. Return ONLY the JSON, nothing else.`;

      const response = await fetch("https://api.anthropic.com/v1/messages", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
          model:"claude-sonnet-4-20250514",
          max_tokens:1000,
          messages:[{role:"user",content:prompt}]
        })
      });

      const data = await response.json();
      const text = data.content?.map(c=>c.text||"").join("").trim();
      const clean = text.replace(/```json|```/g,"").trim();
      const fin = JSON.parse(clean);

      // Build growth array fading from last year's growth
      const g0=Math.min(35,Math.max(3,fin.revenueGrowthLast||10));
      const growthArr=[g0,g0*.88,g0*.78,g0*.70,g0*.64].map(x=>parseFloat(x.toFixed(1)));

      setInp({
        companyName:fin.companyName||ticker,
        ticker:fin.ticker||ticker,
        currency:fin.currency||"USD",
        sym:fin.currencySymbol||"$",
        currentPrice:fin.currentPrice||0,
        revenue:fin.revenue||0,
        ebitdaMargin:parseFloat((fin.ebitdaMargin||25).toFixed(1)),
        daPercent:parseFloat((fin.daPercent||4).toFixed(1)),
        taxRate:parseFloat((fin.taxRate||21).toFixed(1)),
        capexPercent:parseFloat((fin.capexPercent||5).toFixed(1)),
        nwcPercent:2,
        netDebt:fin.netDebt||0,
        sharesOut:fin.sharesOutstanding||1000,
        revenueGrowth:growthArr,
        wacc:fin.currency==="INR"?12:10,
        terminalGrowth:fin.currency==="INR"?4:3,
        evEbitdaMultiple:15,
        terminalMethod:"gordon",
      });
      setStatus({ok:true,msg:`‚úì Loaded ${fin.companyName} (${fin.ticker}) ¬∑ ${fin.currency} ¬∑ FY data`});
      setTab("inputs");
    } catch(e) {
      setStatus({ok:false,msg:`Error: ${e.message}`});
    } finally {setLoading(false);}
  },[ticker]);

  const dcf=useMemo(()=>calcDCF(inp),[inp]);
  const sym=inp.sym||"$";
  const TABS=["inputs","projections","valuation","sensitivity"];

  return (
    <>
      <style>{CSS}</style>
      <div className="root">

        {/* Fetch Bar */}
        <div className="ticker-bar">
          <span className="ticker-label">‚¨° DCF Terminal</span>
          <input className="ticker-input" value={ticker}
            onChange={e=>setTicker(e.target.value)}
            onKeyDown={e=>e.key==="Enter"&&fetchData()}
            placeholder="Ticker  e.g.  RELIANCE.NS ¬∑ AAPL ¬∑ TCS.NS ¬∑ MSFT ¬∑ INFY" />
          <button className="fetch-btn" onClick={fetchData} disabled={loading}>
            {loading?<span className="spinner"/>:"FETCH DATA"}
          </button>
          {status&&<span className={status.ok?"status-ok":"status-err"}>{status.msg}</span>}
        </div>

        {/* Header */}
        <div className="header-card">
          <div>
            <div className="co-name">
              {inp.companyName||"‚Äî Enter ticker above & hit FETCH DATA ‚Äî"}
              {inp.ticker&&<span style={{color:"var(--muted)",fontSize:14,marginLeft:10}}>({inp.ticker})</span>}
            </div>
            <div className="co-sub">
              {inp.currentPrice>0?`CURRENT PRICE: ${sym}${fmt(inp.currentPrice,2)} ¬∑ `:""}
              DCF VALUATION MODEL ¬∑ {inp.currency||"USD"} MILLIONS
            </div>
          </div>
          {inp.revenue>0&&(
            <div className="kpi-grid">
              {[
                {label:"Enterprise Value", val:fmtB(dcf.ev*1e6,sym),    cls:""},
                {label:"Equity Value",     val:fmtB(dcf.eqV*1e6,sym),   cls:"white"},
                {label:"Implied Price",    val:`${sym}${fmt(dcf.impliedPrice,2)}`, cls:""},
                ...(dcf.upside!==null?[{label:"Upside/(Downside)", val:`${dcf.upside>=0?"+":""}${fmt(dcf.upside,1)}%`, cls:dcf.upside>=0?"green":"red"}]:[]),
              ].map(k=>(
                <div key={k.label} className="kpi-item">
                  <div className="kpi-label">{k.label}</div>
                  <div className={`kpi-value ${k.cls}`}>{k.val}</div>
                </div>
              ))}
            </div>
          )}
        </div>

        {/* Loading overlay */}
        {loading&&(
          <div className="card loading-overlay">
            <div className="big-spinner"/>
            <span>Fetching financial data for <strong style={{color:"var(--amber)"}}>{ticker.toUpperCase()}</strong>...</span>
            <span style={{fontSize:10,color:"var(--muted)"}}>Pulling revenue, EBITDA, balance sheet & price data</span>
          </div>
        )}

        {!loading&&<>
          {/* Tabs */}
          <div className="tabs">
            {TABS.map(t=>(
              <button key={t} className={`tab${tab===t?" active":""}`} onClick={()=>setTab(t)}>
                {t}
              </button>
            ))}
          </div>

          {/* INPUTS */}
          {tab==="inputs"&&(
            <div className="grid-2">
              <div className="card">
                <div className="card-title">Company Data</div>
                {[
                  {label:"Company Name",        k:"companyName",  type:"text"},
                  {label:"Ticker",              k:"ticker",       type:"text"},
                  {label:`Revenue (${sym}M)`,   k:"revenue"},
                  {label:`Net Debt (${sym}M)`,  k:"netDebt"},
                  {label:"Shares Out (M)",       k:"sharesOut"},
                  {label:`Current Price (${sym})`,k:"currentPrice"},
                ].map(f=>(
                  <div key={f.k} className="inp-row">
                    <span className="inp-label">{f.label}</span>
                    <input type={f.type||"number"} value={inp[f.k]}
                      onChange={e=>set(f.k,f.type==="text"?e.target.value:parseFloat(e.target.value)||0)}
                      className={`inp-field${f.type==="text"?" tl":""}`}/>
                  </div>
                ))}
              </div>

              <div className="card">
                <div className="card-title">Operating Assumptions</div>
                {[
                  {label:"EBITDA Margin (%)",      k:"ebitdaMargin"},
                  {label:"D&A (% Revenue)",         k:"daPercent"},
                  {label:"Tax Rate (%)",            k:"taxRate"},
                  {label:"CapEx (% Revenue)",       k:"capexPercent"},
                  {label:"NWC Change (% Revenue)",  k:"nwcPercent"},
                ].map(f=>(
                  <div key={f.k} className="inp-row">
                    <span className="inp-label">{f.label}</span>
                    <input type="number" value={inp[f.k]} step={0.5}
                      onChange={e=>set(f.k,parseFloat(e.target.value)||0)} className="inp-field"/>
                  </div>
                ))}
              </div>

              <div className="card">
                <div className="card-title">Revenue Growth by Year (%)</div>
                {[1,2,3,4,5].map((y,i)=>(
                  <div key={y} className="inp-row">
                    <span className="inp-label">Year {y} ¬∑ {2024+y}</span>
                    <input type="number" value={inp.revenueGrowth[i]} step={0.5}
                      onChange={e=>setG(i,e.target.value)} className="inp-field"/>
                  </div>
                ))}
              </div>

              <div className="card">
                <div className="card-title">Discount Rate & Terminal Value</div>
                <div className="inp-row">
                  <span className="inp-label">WACC (%)</span>
                  <input type="number" value={inp.wacc} step={0.25}
                    onChange={e=>set("wacc",parseFloat(e.target.value)||0)} className="inp-field"/>
                </div>
                <div className="inp-row">
                  <span className="inp-label">Terminal Method</span>
                  <select value={inp.terminalMethod} onChange={e=>set("terminalMethod",e.target.value)} className="inp-field tl">
                    <option value="gordon">Gordon Growth Model</option>
                    <option value="multiple">EV/EBITDA Exit Multiple</option>
                  </select>
                </div>
                {inp.terminalMethod==="gordon"
                  ?<div className="inp-row">
                    <span className="inp-label">Terminal Growth (%)</span>
                    <input type="number" value={inp.terminalGrowth} step={0.25}
                      onChange={e=>set("terminalGrowth",parseFloat(e.target.value)||0)} className="inp-field"/>
                  </div>
                  :<div className="inp-row">
                    <span className="inp-label">EV/EBITDA Multiple</span>
                    <input type="number" value={inp.evEbitdaMultiple} step={0.5}
                      onChange={e=>set("evEbitdaMultiple",parseFloat(e.target.value)||0)} className="inp-field"/>
                  </div>
                }
              </div>
            </div>
          )}

          {/* PROJECTIONS */}
          {tab==="projections"&&(
            <div className="card">
              <div className="card-title">5-Year Free Cash Flow Projections ({sym}M)</div>
              <div style={{overflowX:"auto"}}>
                <table className="data-table">
                  <thead>
                    <tr>{["Metric",...dcf.proj.map(p=>p.year)].map(h=><th key={h}>{h}</th>)}</tr>
                  </thead>
                  <tbody>
                    {[
                      {label:"Revenue",       k:"rev",   bold:true},
                      {label:"EBITDA",        k:"ebitda"},
                      {label:"D&A",           k:"da"},
                      {label:"EBIT",          k:"ebit"},
                      {label:"NOPAT",         k:"nopat"},
                      {label:"CapEx",         k:"capex"},
                      {label:"NWC Change",    k:"nwc"},
                      {label:"Free Cash Flow",k:"fcf",   hi:true},
                      {label:"Discount Factor",k:"df",   fmt4:true},
                      {label:"PV of FCF",     k:"pvFCF", bold:true},
                    ].map(row=>(
                      <tr key={row.k} className={row.hi?"row-hi":row.bold?"row-bold":""}>
                        <td>{row.label}</td>
                        {dcf.proj.map(p=><td key={p.year}>{row.fmt4?fmt(p[row.k],4):fmtB(p[row.k]*1e6,sym)}</td>)}
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          )}

          {/* VALUATION */}
          {tab==="valuation"&&(
            <div className="grid-2">
              <div className="card">
                <div className="card-title">Valuation Bridge</div>
                {[
                  {lbl:"PV of FCFs (Years 1‚Äì5)",  val:fmtB(dcf.pvFCFSum*1e6,sym)},
                  {lbl:"PV of Terminal Value",     val:fmtB(dcf.pvTV*1e6,sym)},
                  {lbl:"Enterprise Value",         val:fmtB(dcf.ev*1e6,sym),   cls:"val-total", sep:true},
                  {lbl:"Less: Net Debt",           val:`(${fmtB(inp.netDebt*1e6,sym)})`, color:"var(--red)"},
                  {lbl:"Equity Value",             val:fmtB(dcf.eqV*1e6,sym),  cls:"val-total", sep:true},
                  {lbl:"Shares Outstanding",       val:`${fmt(inp.sharesOut,0)}M`},
                  {lbl:"Implied Share Price",      val:`${sym}${fmt(dcf.impliedPrice,2)}`, cls:"val-implied", sep:true},
                  ...(inp.currentPrice>0?[
                    {lbl:"Current Market Price",   val:`${sym}${fmt(inp.currentPrice,2)}`},
                    {lbl:"Upside / (Downside)",    val:`${dcf.upside>=0?"+":""}${fmt(dcf.upside,1)}%`,
                     color:dcf.upside>=0?"var(--green)":"var(--red)"},
                  ]:[]),
                ].map((item,i)=>(
                  <div key={i} className={`val-row ${item.cls||""}`} style={item.sep?{borderTop:"1px solid var(--border2)",marginTop:2}:{}}>
                    <span className="vl">{item.lbl}</span>
                    <span className="vn" style={{fontFamily:"var(--mono)",fontWeight:600,color:item.color||"var(--amber2)"}}>{item.val}</span>
                  </div>
                ))}
              </div>
              <div className="card">
                <div className="card-title">Key Metrics</div>
                <div className="metric-grid">
                  {[
                    {l:"WACC",           v:fmtP(inp.wacc)},
                    {l:inp.terminalMethod==="gordon"?"Terminal Growth":"Exit Multiple",
                     v:inp.terminalMethod==="gordon"?fmtP(inp.terminalGrowth):`${fmt(inp.evEbitdaMultiple,1)}x`},
                    {l:"Terminal Value", v:fmtB(dcf.tv*1e6,sym)},
                    {l:"TV % of EV",     v:fmtP(dcf.tvPct)},
                    {l:"EBITDA Margin",  v:fmtP(inp.ebitdaMargin)},
                    {l:"5yr Avg FCF",    v:fmtB(dcf.proj.reduce((s,p)=>s+p.fcf,0)/5*1e6,sym)},
                  ].map(m=>(
                    <div key={m.l} className="metric-card">
                      <div className="ml">{m.l}</div>
                      <div className="mv">{m.v}</div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {/* SENSITIVITY */}
          {tab==="sensitivity"&&(
            <div className="card">
              <div className="card-title">Sensitivity ¬∑ Implied Share Price ({sym}) ¬∑ WACC vs Terminal Growth</div>
              <div style={{overflowX:"auto"}}>
                <table className="sens-table">
                  <thead>
                    <tr>
                      <th>WACC \ TGR</th>
                      {dcf.sensCols.map(c=><th key={c}>{fmtP(c)}</th>)}
                    </tr>
                  </thead>
                  <tbody>
                    {dcf.sensitivity.map((row,ri)=>{
                      const all=dcf.sensitivity.flat(),mn=Math.min(...all),mx=Math.max(...all);
                      return (
                        <tr key={ri}>
                          <th>{fmtP(dcf.sensRows[ri])}</th>
                          {row.map((val,ci)=>{
                            const t=(val-mn)/(mx-mn), isBase=ri===2&&ci===2;
                            const bg=isBase?"":t>0.65?`rgba(16,185,129,${.1+t*.35})`:t<0.35?`rgba(239,68,68,${.1+(1-t)*.35})`:"";
                            return (
                              <td key={ci} className={isBase?"sens-base":""} style={{background:bg,color:isBase?"":t>0.5?"var(--green)":"var(--red)"}}>
                                {sym}{fmt(val,2)}
                              </td>
                            );
                          })}
                        </tr>
                      );
                    })}
                  </tbody>
                </table>
              </div>
              <p style={{fontFamily:"var(--mono)",fontSize:10,color:"var(--muted)",marginTop:10}}>
                Highlighted cell = base case ¬∑ Green = higher valuation ¬∑ Red = lower
              </p>
            </div>
          )}

          <div className="note">
            Powered by Claude AI ¬∑ Data from training knowledge (verify with latest filings) ¬∑ All values in {inp.currency}M unless stated ¬∑ For analytical purposes only
          </div>
        </>}
      </div>
    </>
  );
}

<script src="script.js" defer></script>

</body>
</html>
